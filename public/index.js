(function(j,z){typeof exports=="object"&&typeof module<"u"?module.exports=z(require("qtiCustomInteractionContext")):typeof define=="function"&&define.amd?define(["qtiCustomInteractionContext"],z):(j=typeof globalThis<"u"?globalThis:j||self,j.pci=z(j.ctx))})(this,function(j){"use strict";function z(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const ft=z(j);var B,d,dt,L,ht,mt,Z,tt,et,nt,q={},vt=[],qt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ot=Array.isArray;function M(e,t){for(var n in t)e[n]=t[n];return e}function yt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Yt(e,t,n){var o,r,i,u={};for(i in t)i=="key"?o=t[i]:i=="ref"?r=t[i]:u[i]=t[i];if(arguments.length>2&&(u.children=arguments.length>3?B.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)u[i]===void 0&&(u[i]=e.defaultProps[i]);return V(e,u,o,r,null)}function V(e,t,n,o,r){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++dt,__i:-1,__u:0};return r==null&&d.vnode!=null&&d.vnode(i),i}function U(e){return e.children}function A(e,t){this.props=e,this.context=t}function D(e,t){if(t==null)return e.__?D(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?D(e):null}function gt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return gt(e)}}function bt(e){(!e.__d&&(e.__d=!0)&&L.push(e)&&!X.__r++||ht!==d.debounceRendering)&&((ht=d.debounceRendering)||mt)(X)}function X(){var e,t,n,o,r,i,u,c;for(L.sort(Z);e=L.shift();)e.__d&&(t=L.length,o=void 0,i=(r=(n=e).__v).__e,u=[],c=[],n.__P&&((o=M({},r)).__v=r.__v+1,d.vnode&&d.vnode(o),rt(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[i]:null,u,i??D(r),!!(32&r.__u),c),o.__v=r.__v,o.__.__k[o.__i]=o,Tt(u,o,c),o.__e!=i&&gt(o)),L.length>t&&L.sort(Z));X.__r=0}function wt(e,t,n,o,r,i,u,c,f,l,m){var _,g,h,x,s,p=o&&o.__k||vt,a=t.length;for(n.__d=f,Jt(n,t,p),f=n.__d,_=0;_<a;_++)(h=n.__k[_])!=null&&(g=h.__i===-1?q:p[h.__i]||q,h.__i=_,rt(e,h,g,r,i,u,c,f,l,m),x=h.__e,h.ref&&g.ref!=h.ref&&(g.ref&&it(g.ref,null,h),m.push(h.ref,h.__c||x,h)),s==null&&x!=null&&(s=x),65536&h.__u||g.__k===h.__k?f=kt(h,f,e):typeof h.type=="function"&&h.__d!==void 0?f=h.__d:x&&(f=x.nextSibling),h.__d=void 0,h.__u&=-196609);n.__d=f,n.__e=s}function Jt(e,t,n){var o,r,i,u,c,f=t.length,l=n.length,m=l,_=0;for(e.__k=[],o=0;o<f;o++)(r=t[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(u=o+_,(r=e.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?V(null,r,null,null,null):ot(r)?V(U,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?V(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=e,r.__b=e.__b+1,i=null,(c=r.__i=Bt(r,n,u,m))!==-1&&(m--,(i=n[c])&&(i.__u|=131072)),i==null||i.__v===null?(c==-1&&_--,typeof r.type!="function"&&(r.__u|=65536)):c!==u&&(c==u-1?_--:c==u+1?_++:(c>u?_--:_++,r.__u|=65536))):r=e.__k[o]=null;if(m)for(o=0;o<l;o++)(i=n[o])!=null&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=D(i)),Et(i,i))}function kt(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=kt(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=D(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Bt(e,t,n,o){var r=e.key,i=e.type,u=n-1,c=n+1,f=t[n];if(f===null||f&&r==f.key&&i===f.type&&!(131072&f.__u))return n;if(o>(f!=null&&!(131072&f.__u)?1:0))for(;u>=0||c<t.length;){if(u>=0){if((f=t[u])&&!(131072&f.__u)&&r==f.key&&i===f.type)return u;u--}if(c<t.length){if((f=t[c])&&!(131072&f.__u)&&r==f.key&&i===f.type)return c;c++}}return-1}function xt(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||qt.test(t)?n:n+"px"}function K(e,t,n,o,r){var i;t:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||xt(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||xt(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.u=o.u:(n.u=tt,e.addEventListener(t,i?nt:et,i)):e.removeEventListener(t,i?nt:et,i);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function St(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=tt++;else if(t.t<n.u)return;return n(d.event?d.event(t):t)}}}function rt(e,t,n,o,r,i,u,c,f,l){var m,_,g,h,x,s,p,a,v,b,y,T,N,O,P,I,E=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(f=!!(32&n.__u),i=[c=t.__e=n.__e]),(m=d.__b)&&m(t);t:if(typeof E=="function")try{if(a=t.props,v="prototype"in E&&E.prototype.render,b=(m=E.contextType)&&o[m.__c],y=m?b?b.props.value:m.__:o,n.__c?p=(_=t.__c=n.__c).__=_.__E:(v?t.__c=_=new E(a,y):(t.__c=_=new A(a,y),_.constructor=E,_.render=Xt),b&&b.sub(_),_.props=a,_.state||(_.state={}),_.context=y,_.__n=o,g=_.__d=!0,_.__h=[],_._sb=[]),v&&_.__s==null&&(_.__s=_.state),v&&E.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=M({},_.__s)),M(_.__s,E.getDerivedStateFromProps(a,_.__s))),h=_.props,x=_.state,_.__v=t,g)v&&E.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),v&&_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(v&&E.getDerivedStateFromProps==null&&a!==h&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(a,y),!_.__e&&(_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(a,_.__s,y)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(_.props=a,_.state=_.__s,_.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function($){$&&($.__=t)}),T=0;T<_._sb.length;T++)_.__h.push(_._sb[T]);_._sb=[],_.__h.length&&u.push(_);break t}_.componentWillUpdate!=null&&_.componentWillUpdate(a,_.__s,y),v&&_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(h,x,s)})}if(_.context=y,_.props=a,_.__P=e,_.__e=!1,N=d.__r,O=0,v){for(_.state=_.__s,_.__d=!1,N&&N(t),m=_.render(_.props,_.state,_.context),P=0;P<_._sb.length;P++)_.__h.push(_._sb[P]);_._sb=[]}else do _.__d=!1,N&&N(t),m=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++O<25);_.state=_.__s,_.getChildContext!=null&&(o=M(M({},o),_.getChildContext())),v&&!g&&_.getSnapshotBeforeUpdate!=null&&(s=_.getSnapshotBeforeUpdate(h,x)),wt(e,ot(I=m!=null&&m.type===U&&m.key==null?m.props.children:m)?I:[I],t,n,o,r,i,u,c,f,l),_.base=t.__e,t.__u&=-161,_.__h.length&&u.push(_),p&&(_.__E=_.__=null)}catch($){if(t.__v=null,f||i!=null){for(t.__u|=f?160:32;c&&c.nodeType===8&&c.nextSibling;)c=c.nextSibling;i[i.indexOf(c)]=null,t.__e=c}else t.__e=n.__e,t.__k=n.__k;d.__e($,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Vt(n.__e,t,n,o,r,i,u,f,l);(m=d.diffed)&&m(t)}function Tt(e,t,n){t.__d=void 0;for(var o=0;o<n.length;o++)it(n[o],n[++o],n[++o]);d.__c&&d.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(i){i.call(r)})}catch(i){d.__e(i,r.__v)}})}function Vt(e,t,n,o,r,i,u,c,f){var l,m,_,g,h,x,s,p=n.props,a=t.props,v=t.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((h=i[l])&&"setAttribute"in h==!!v&&(v?h.localName===v:h.nodeType===3)){e=h,i[l]=null;break}}if(e==null){if(v===null)return document.createTextNode(a);e=document.createElementNS(r,v,a.is&&a),c&&(d.__m&&d.__m(t,i),c=!1),i=null}if(v===null)p===a||c&&e.data===a||(e.data=a);else{if(i=i&&B.call(e.childNodes),p=n.props||q,!c&&i!=null)for(p={},l=0;l<e.attributes.length;l++)p[(h=e.attributes[l]).name]=h.value;for(l in p)if(h=p[l],l!="children"){if(l=="dangerouslySetInnerHTML")_=h;else if(!(l in a)){if(l=="value"&&"defaultValue"in a||l=="checked"&&"defaultChecked"in a)continue;K(e,l,null,h,r)}}for(l in a)h=a[l],l=="children"?g=h:l=="dangerouslySetInnerHTML"?m=h:l=="value"?x=h:l=="checked"?s=h:c&&typeof h!="function"||p[l]===h||K(e,l,h,p[l],r);if(m)c||_&&(m.__html===_.__html||m.__html===e.innerHTML)||(e.innerHTML=m.__html),t.__k=[];else if(_&&(e.innerHTML=""),wt(e,ot(g)?g:[g],t,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,i,u,i?i[0]:n.__k&&D(n,0),c,f),i!=null)for(l=i.length;l--;)yt(i[l]);c||(l="value",v==="progress"&&x==null?e.removeAttribute("value"):x!==void 0&&(x!==e[l]||v==="progress"&&!x||v==="option"&&x!==p[l])&&K(e,l,x,p[l],r),l="checked",s!==void 0&&s!==e[l]&&K(e,l,s,p[l],r))}return e}function it(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){d.__e(r,n)}}function Et(e,t,n){var o,r;if(d.unmount&&d.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||it(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){d.__e(i,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Et(o[r],t,n||typeof e.type!="function");n||yt(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Xt(e,t,n){return this.constructor(e,n)}function $t(e,t,n){var o,r,i,u;d.__&&d.__(e,t),r=(o=typeof n=="function")?null:t.__k,i=[],u=[],rt(t,e=(!o&&n||t).__k=Yt(U,null,[e]),r||q,q,t.namespaceURI,!o&&n?[n]:r?null:t.firstChild?B.call(t.childNodes):null,i,!o&&n?n:r?r.__e:t.firstChild,o,u),Tt(i,e,u)}B=vt.slice,d={__e:function(e,t,n,o){for(var r,i,u;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&i.getDerivedStateFromError!=null&&(r.setState(i.getDerivedStateFromError(e)),u=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),u=r.__d),u)return r.__E=r}catch(c){e=c}throw e}},dt=0,A.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=M({},this.state),typeof e=="function"&&(e=e(M({},n),this.props)),e&&M(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),bt(this))},A.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),bt(this))},A.prototype.render=U,L=[],mt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Z=function(e,t){return e.__v.__b-t.__v.__b},X.__r=0,tt=0,et=St(!1),nt=St(!0);var Kt=0;function F(e,t,n,o,r,i){t||(t={});var u,c,f=t;if("ref"in f)for(c in f={},t)c=="ref"?u=t[c]:f[c]=t[c];var l={type:e,props:f,key:n,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Kt,__i:-1,__u:0,__source:r,__self:i};if(typeof e=="function"&&(u=e.defaultProps))for(c in u)f[c]===void 0&&(f[c]=u[c]);return d.vnode&&d.vnode(l),l}var _t;(_t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:void 0)!=null&&_t.__PREACT_DEVTOOLS__&&_t.__PREACT_DEVTOOLS__.attachPreact("10.24.0",d,{Fragment:U,Component:A});var Nt={};function C(e){return e.type===U?"Fragment":typeof e.type=="function"?e.type.displayName||e.type.name:typeof e.type=="string"?e.type:"#text"}var Y=[],W=[];function Ht(){return Y.length>0?Y[Y.length-1]:null}var Ct=!0;function st(e){return typeof e.type=="function"&&e.type!=U}function S(e){for(var t=[e],n=e;n.__o!=null;)t.push(n.__o),n=n.__o;return t.reduce(function(o,r){o+="  in "+C(r);var i=r.__source;return i?o+=" (at "+i.fileName+":"+i.lineNumber+")":Ct&&console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons."),Ct=!1,o+`
`},"")}var Gt=typeof WeakMap=="function";function at(e){var t=[];return e.__k&&e.__k.forEach(function(n){n&&typeof n.type=="function"?t.push.apply(t,at(n)):n&&typeof n.type=="string"&&t.push(n.type)}),t}function Ot(e){return e?typeof e.type=="function"?e.__==null?e.__e!=null&&e.__e.parentNode!=null?e.__e.parentNode.localName:"":Ot(e.__):e.type:""}var Qt=A.prototype.setState;function lt(e){return e==="table"||e==="tfoot"||e==="tbody"||e==="thead"||e==="td"||e==="tr"||e==="th"}A.prototype.setState=function(e,t){return this.__v==null&&this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+S(Ht())),Qt.call(this,e,t)};var Zt=/^(address|article|aside|blockquote|details|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|main|menu|nav|ol|p|pre|search|section|table|ul)$/,te=A.prototype.forceUpdate;function H(e){var t=e.props,n=C(e),o="";for(var r in t)if(t.hasOwnProperty(r)&&r!=="children"){var i=t[r];typeof i=="function"&&(i="function "+(i.displayName||i.name)+"() {}"),i=Object(i)!==i||i.toString?i+"":Object.prototype.toString.call(i),o+=" "+r+"="+JSON.stringify(i)}var u=t.children;return"<"+n+o+(u&&u.length?">..</"+n+">":" />")}A.prototype.forceUpdate=function(e){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+S(Ht())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+S(this.__v)),te.call(this,e)},d.__m=function(e,t){var n=e.type,o=t.map(function(r){return r.localName});console.error("Expected a DOM node of type "+n+" but found "+o.join(", ")+`as available DOM-node(s), this is caused by the SSR'd HTML containing different DOM-nodes compared to the hydrated one.

`+S(e))},function(){(function(){var s=d.__b,p=d.diffed,a=d.__,v=d.vnode,b=d.__r;d.diffed=function(y){st(y)&&W.pop(),Y.pop(),p&&p(y)},d.__b=function(y){st(y)&&Y.push(y),s&&s(y)},d.__=function(y,T){W=[],a&&a(y,T)},d.vnode=function(y){y.__o=W.length>0?W[W.length-1]:null,v&&v(y)},d.__r=function(y){st(y)&&W.push(y),b&&b(y)}})();var e=!1,t=d.__b,n=d.diffed,o=d.vnode,r=d.__r,i=d.__e,u=d.__,c=d.__h,f=Gt?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,l=[];d.__e=function(s,p,a,v){if(p&&p.__c&&typeof s.then=="function"){var b=s;s=new Error("Missing Suspense. The throwing component was: "+C(p));for(var y=p;y;y=y.__)if(y.__c&&y.__c.__c){s=b;break}if(s instanceof Error)throw s}try{(v=v||{}).componentStack=S(p),i(s,p,a,v),typeof s.then!="function"&&setTimeout(function(){throw s})}catch(T){throw T}},d.__=function(s,p){if(!p)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var a;switch(p.nodeType){case 1:case 11:case 9:a=!0;break;default:a=!1}if(!a){var v=C(s);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+p+" instead: render(<"+v+" />, "+p+");")}u&&u(s,p)},d.__b=function(s){var p=s.type;if(e=!0,p===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+H(s)+`

`+S(s));if(p!=null&&typeof p=="object")throw p.__k!==void 0&&p.__e!==void 0?new Error("Invalid type passed to createElement(): "+p+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+C(s)+" = "+H(p)+`;
  let vnode = <My`+C(s)+` />;

This usually happens when you export a JSX literal and not the component.

`+S(s)):new Error("Invalid type passed to createElement(): "+(Array.isArray(p)?"array":p));if(s.ref!==void 0&&typeof s.ref!="function"&&typeof s.ref!="object"&&!("$$typeof"in s))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof s.ref+`] instead
`+H(s)+`

`+S(s));if(typeof s.type=="string"){for(var a in s.props)if(a[0]==="o"&&a[1]==="n"&&typeof s.props[a]!="function"&&s.props[a]!=null)throw new Error(`Component's "`+a+'" property should be a function, but got ['+typeof s.props[a]+`] instead
`+H(s)+`

`+S(s))}if(typeof s.type=="function"&&s.type.propTypes){if(s.type.displayName==="Lazy"&&f&&!f.lazyPropTypes.has(s.type)){var v="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var b=s.type();f.lazyPropTypes.set(s.type,!0),console.warn(v+"Component wrapped in lazy() is "+C(b))}catch{console.warn(v+"We will log the wrapped component's name once it is loaded.")}}var y=s.props;s.type.__f&&delete(y=function(T,N){for(var O in N)T[O]=N[O];return T}({},y)).ref,function(T,N,O,P,I){Object.keys(T).forEach(function(E){var $;try{$=T[E](N,E,P,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(J){$=J}$&&!($.message in Nt)&&(Nt[$.message]=!0,console.error("Failed prop type: "+$.message+(I&&`
`+I()||"")))})}(s.type.propTypes,y,0,C(s),function(){return S(s)})}t&&t(s)};var m,_=0;d.__r=function(s){r&&r(s),e=!0;var p=s.__c;if(p===m?_++:_=1,_>=25)throw new Error("Too many re-renders. This is limited to prevent an infinite loop which may lock up your browser. The component causing this is: "+C(s));m=p},d.__h=function(s,p,a){if(!s||!e)throw new Error("Hook can only be invoked from render methods.");c&&c(s,p,a)};var g=function(s,p){return{get:function(){var a="get"+s+p;l&&l.indexOf(a)<0&&(l.push(a),console.warn("getting vnode."+s+" is deprecated, "+p))},set:function(){var a="set"+s+p;l&&l.indexOf(a)<0&&(l.push(a),console.warn("setting vnode."+s+" is not allowed, "+p))}}},h={nodeName:g("nodeName","use vnode.type"),attributes:g("attributes","use vnode.props"),children:g("children","use vnode.props.children")},x=Object.create({},h);d.vnode=function(s){var p=s.props;if(s.type!==null&&p!=null&&("__source"in p||"__self"in p)){var a=s.props={};for(var v in p){var b=p[v];v==="__source"?s.__source=b:v==="__self"?s.__self=b:a[v]=b}}s.__proto__=x,o&&o(s)},d.diffed=function(s){var p,a=s.type,v=s.__;if(s.__k&&s.__k.forEach(function(R){if(typeof R=="object"&&R&&R.type===void 0){var he=Object.keys(R).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+he+`}.

`+S(s))}}),s.__c===m&&(_=0),typeof a=="string"&&(lt(a)||a==="p"||a==="a"||a==="button")){var b=Ot(v);if(b!==""&&lt(a))a==="table"&&b!=="td"&&lt(b)?(console.log(b,v.__e),console.error("Improper nesting of table. Your <table> should not have a table-node parent."+H(s)+`

`+S(s))):a!=="thead"&&a!=="tfoot"&&a!=="tbody"||b==="table"?a==="tr"&&b!=="thead"&&b!=="tfoot"&&b!=="tbody"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot> parent."+H(s)+`

`+S(s)):a==="td"&&b!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+H(s)+`

`+S(s)):a==="th"&&b!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+H(s)+`

`+S(s)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+H(s)+`

`+S(s));else if(a==="p"){var y=at(s).filter(function(R){return Zt.test(R)});y.length&&console.error("Improper nesting of paragraph. Your <p> should not have "+y.join(", ")+"as child-elements."+H(s)+`

`+S(s))}else a!=="a"&&a!=="button"||at(s).indexOf(a)!==-1&&console.error("Improper nesting of interactive content. Your <"+a+"> should not have other "+(a==="a"?"anchor":"button")+" tags as child-elements."+H(s)+`

`+S(s))}if(e=!1,n&&n(s),s.__k!=null)for(var T=[],N=0;N<s.__k.length;N++){var O=s.__k[N];if(O&&O.key!=null){var P=O.key;if(T.indexOf(P)!==-1){console.error('Following component has two or more children with the same key attribute: "'+P+`". This may cause glitches and misbehavior in rendering process. Component: 

`+H(s)+`

`+S(s));break}T.push(P)}}if(s.__c!=null&&s.__c.__H!=null){var I=s.__c.__H.__;if(I)for(var E=0;E<I.length;E+=1){var $=I[E];if($.__H){for(var J=0;J<$.__H.length;J++)if((p=$.__H[J])!=p){var de=C(s);throw new Error("Invalid argument passed to hook. Hooks should not be called with NaN in the dependency array. Hook index "+E+" in component "+de+" was called with NaN.")}}}}}}();var G,w,ct,Pt,ut=0,It=[],k=d,At=k.__b,Mt=k.__r,Lt=k.diffed,Ut=k.__c,jt=k.unmount,Dt=k.__;function Ft(e,t){k.__h&&k.__h(w,e,ut||t),ut=0;var n=w.__H||(w.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function Wt(e){return ut=1,ee(zt,e)}function ee(e,t,n){var o=Ft(G++,2);if(o.t=e,!o.__c&&(o.__=[zt(void 0,t),function(c){var f=o.__N?o.__N[0]:o.__[0],l=o.t(f,c);f!==l&&(o.__N=[l,o.__[1]],o.__c.setState({}))}],o.__c=w,!w.u)){var r=function(c,f,l){if(!o.__c.__H)return!0;var m=o.__c.__H.__.filter(function(g){return!!g.__c});if(m.every(function(g){return!g.__N}))return!i||i.call(this,c,f,l);var _=!1;return m.forEach(function(g){if(g.__N){var h=g.__[0];g.__=g.__N,g.__N=void 0,h!==g.__[0]&&(_=!0)}}),!(!_&&o.__c.props===c)&&(!i||i.call(this,c,f,l))};w.u=!0;var i=w.shouldComponentUpdate,u=w.componentWillUpdate;w.componentWillUpdate=function(c,f,l){if(this.__e){var m=i;i=void 0,r(c,f,l),i=m}u&&u.call(this,c,f,l)},w.shouldComponentUpdate=r}return o.__N||o.__}function ne(e,t){var n=Ft(G++,3);!k.__s&&ie(n.__H,t)&&(n.__=e,n.i=t,w.__H.__h.push(n))}function oe(){for(var e;e=It.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Q),e.__H.__h.forEach(pt),e.__H.__h=[]}catch(t){e.__H.__h=[],k.__e(t,e.__v)}}k.__b=function(e){w=null,At&&At(e)},k.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Dt&&Dt(e,t)},k.__r=function(e){Mt&&Mt(e),G=0;var t=(w=e.__c).__H;t&&(ct===w?(t.__h=[],w.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(Q),t.__h.forEach(pt),t.__h=[],G=0)),ct=w},k.diffed=function(e){Lt&&Lt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(It.push(t)!==1&&Pt===k.requestAnimationFrame||((Pt=k.requestAnimationFrame)||re)(oe)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),ct=w=null},k.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Q),n.__h=n.__h.filter(function(o){return!o.__||pt(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],k.__e(o,n.__v)}}),Ut&&Ut(e,t)},k.unmount=function(e){jt&&jt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{Q(o)}catch(r){t=r}}),n.__H=void 0,t&&k.__e(t,n.__v))};var Rt=typeof requestAnimationFrame=="function";function re(e){var t,n=function(){clearTimeout(o),Rt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);Rt&&(t=requestAnimationFrame(n))}function Q(e){var t=w,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),w=t}function pt(e){var t=w;e.__c=e.__(),w=t}function ie(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function zt(e,t){return typeof t=="function"?t(e):t}var _e=function(e,t,n,o){function r(i){return i instanceof n?i:new n(function(u){u(i)})}return new(n||(n=Promise))(function(i,u){function c(m){try{l(o.next(m))}catch(_){u(_)}}function f(m){try{l(o.throw(m))}catch(_){u(_)}}function l(m){m.done?i(m.value):r(m.value).then(c,f)}l((o=o.apply(e,t||[])).next())})};class se{constructor(t,n){if(this.initialState=t,this.listeners=[],this.actionListeners=[],this.actions=[],this.reducers={},this.timeout=o=>new Promise(r=>setTimeout(r,o)),this.state=(n==null?void 0:n.state)||t,n!=null&&n.actions){this.state=t,this.actions=n.actions;for(const o of this.actions)this.state=this.reduce(this.state,o)}}getState(){return this.state}getActions(){return this.actions}dispatch(t){const n=Date.now(),o=Object.assign(Object.assign({},t),{timestamp:n});this.actions.push(o),this.state=this.reduce(this.state,o),this.notifyListeners(o)}reset(){this.state=this.initialState,this.actions=[]}restoreState(t,n){this.state=t,this.actions=n}replay(t,n){return _e(this,void 0,void 0,function*(){this.reset(),this.actions=[];let o=0;(n==null?void 0:n.until)!=null&&(t=t.slice(0,n.until));for(const r of t){let i=(n==null?void 0:n.animate)===!1?0:o?r.timestamp-o:0;n!=null&&n.speed&&(i/=n.speed),yield this.timeout(i),this.actions.push(r),this.state=this.reduce(this.state,r),this.notifyListeners(r),o=r.timestamp}})}subscribe(t){this.listeners.push(t),t(this.state)}subscribeActions(t){this.actionListeners.push(t)}unsubscribe(t){const n=this.listeners.indexOf(t);n!==-1&&this.listeners.splice(n,1)}unsubscribeAll(){this.listeners=[]}addReducer(t,n){this.reducers[t]=n}reduce(t,n){const o=this.reducers[n.type];return o?o(t,n.payload):t}notifyListeners(t){for(const n of this.listeners)n(this.state);for(const n of this.actionListeners)n(t);console.log("Action:",t)}}function ae(e){const[t,n]=Wt(e.getState());return ne(()=>{const o=r=>{n(r)};return e.subscribe(o),()=>{e.unsubscribe(o)}},[e]),t}const le=({config:e,dom:t,store:n})=>{const o=ae(n),[r,i]=Wt(!1),u=c=>{if(!r){const f=c.target;n.dispatch({type:"SET_INPUT",payload:{input:+f.value}}),i(!0)}};return F("div",{className:"pci-container",children:[F("h1",{children:e.title}),F("div",{className:"interaction",children:[F("label",{htmlFor:"tentacles",children:e.prompt}),F("input",{type:"number",value:o.input,onInput:u,onPaste:()=>i(!1),onKeyDown:()=>i(!1),min:"0",max:"100"}),"%"]})]})},ce=":root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color:#222;background-color:#fff;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-text-size-adjust:100%}body{margin:0;display:flex;align-items:center;min-height:100vh}#app{max-width:1280px;margin:0 auto;text-align:center}img{margin-bottom:1.5rem}img:hover{filter:drop-shadow(0 0 2em #673ab8aa)}section{margin-top:5rem;display:grid;grid-template-columns:repeat(3,1fr);column-gap:1.5rem}.resource{padding:.75rem 1.5rem;border-radius:.5rem;text-align:left;text-decoration:none;color:#222;background-color:#f1f1f1;border:1px solid transparent}.resource:hover{border:1px solid #000;box-shadow:0 25px 50px -12px #673ab888}@media (max-width: 639px){#app{margin:2rem}section{margin-top:5rem;grid-template-columns:1fr;row-gap:1rem}}@media (prefers-color-scheme: dark){:root{color:#ccc;background-color:#1a1a1a}.resource{color:#ccc;background-color:#161616}.resource:hover{border:1px solid #bbb}}",ue={title:"Percentages",prompt:"What percentage is colored green?",width:"200",height:"200"},pe=(e,t)=>{const n=new se(e,t);return n.addReducer("SET_INPUT",(o,{input:r})=>({...o,input:r})),n};class fe{constructor(){this.typeIdentifier="###___PCI_NAME___###",this.logActions=[],this.initialState={input:void 0},this.getInstance=(t,n,o)=>{n.properties={...ue,...n.properties},this.config=n,this.logActions=o?JSON.parse(o).log:[],this.store=pe(this.initialState);try{const r=o?JSON.parse(o):null;r&&this.store.restoreState(r==null?void 0:r.state,this.logActions)}catch(r){console.log(r)}this.shadowdom=t.attachShadow({mode:"closed"}),this.render(),this.config.onready&&this.config.onready(this)},this.render=()=>{$t(null,this.shadowdom);const t=document.createElement("style");t.innerHTML=ce,this.shadowdom.appendChild(t),$t(F(le,{config:this.config.properties,dom:this.shadowdom,store:this.store}),this.shadowdom)},this.getState=()=>JSON.stringify({state:this.store.getState(),log:this.store.getActions()}),this.getResponse=()=>{var n,o;if((((o=(n=this.store)==null?void 0:n.getState())==null?void 0:o.input)||void 0)!==void 0)return{base:{integer:this.store.getState().input}}},this.oncompleted=()=>{},ft&&ft.register(this)}}return new fe});
